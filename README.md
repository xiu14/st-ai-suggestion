# AI 指引助手 (ST AI Suggestion)

一个为 SillyTavern 设计的 AI 回复建议插件，帮助你快速生成符合角色设定的回复选项。

## ✨ 功能特性

- **智能回复建议** - 基于对话上下文和角色设定，自动生成多个风格各异的回复建议
- **一键填入/发送** - 点击建议按钮后可选择"填入并编辑"或"直接发送"
- **长按大纲生成** - 长按生成按钮可输入剧情大纲，让 AI 根据大纲生成定向建议
- **多 API 配置** - 支持 OpenAI 兼容接口和 Google Gemini API，可保存多套 API 配置
- **自定义提示词** - 支持创建和管理多套提示词模板，可绑定到指定角色
- **主题系统** - 内置多种按钮主题样式，支持自定义 CSS，可与 ST 主题联动

## 📦 安装方法

1. 打开 SillyTavern
2. 进入 **扩展** → **安装扩展**
3. 在"从 GitHub URL 安装"中输入：
   ```
   https://github.com/xiu14/st-ai-suggestion
   ```
4. 点击安装，刷新页面即可使用

## 🚀 使用方法

### 基础使用

1. 安装并启用插件后，在输入框上方会出现生成按钮
2. **单击按钮** → 自动分析对话上下文，生成回复建议
3. **点击建议** → 弹出预览窗口，可选择填入或直接发送

### 长按大纲生成

1. **长按生成按钮** (手机端约 0.5 秒) → 弹出大纲输入框
2. 输入你想要的剧情走向或回复方向
3. AI 会根据大纲生成更符合你期望的建议

### 设置面板

点击生成按钮旁的设置图标，可以：

- **API 设置** - 配置 API 密钥、Base URL、模型等
- **提示词管理** - 创建、编辑、导入/导出提示词模板
- **外观设置** - 选择或自定义按钮主题样式
- **日志面板** - 查看插件运行日志和 AI 原始返回

## ⚙️ API 配置

### OpenAI 兼容接口

适用于 OpenAI、Claude、本地模型 (Ollama、LM Studio) 等：

| 设置项 | 说明 |
|--------|------|
| API Key | 你的 API 密钥 |
| Base URL | API 端点地址 (如 `https://api.openai.com/v1`) |
| Model | 选择或输入模型名称 |

### Google Gemini

| 设置项 | 说明 |
|--------|------|
| API Key | Google AI Studio 的 API 密钥 |
| Model | Flash/Pro 等 Gemini 模型 |

## 📝 自定义提示词

提示词支持以下宏变量：

| 变量 | 说明 |
|------|------|
| `{{user}}` | 用户名 |
| `{{char}}` | 角色名 |
| `{{persona}}` | 用户人设描述 |
| `{{conversation_flow}}` | 最近对话流程 |
| `{{user_last_reply}}` | 用户最后一条消息 |
| `{{ai_last_reply}}` | AI 最后一条消息 |

## 🎨 主题样式

插件内置多种按钮主题，包括：

- 默认主题 (自适应 ST 配色)
- 浅蓝、浅粉等配色
- 召唤猫爪、睡觉喵等趣味主题
- 奶酪小猫、芝士就是力量等特色主题

支持主题与 ST 主题绑定，实现自动切换。

## 📄 许可证

MIT License

## 🙏 致谢

- 原作者: [Sanjs333](https://github.com/Sanjs333)
- Fork 维护: [xiu14](https://github.com/xiu14)